# E2E & Integration Testing Suite - å¿«é€Ÿé–‹å§‹

## ğŸš€ 5 åˆ†é˜å¿«é€Ÿé–‹å§‹

### ç¬¬ä¸€æ­¥ï¼šé€²å…¥é …ç›®

```bash
cd /Users/brianyu/.openclaw/workspace/e2e-tests
```

### ç¬¬äºŒæ­¥ï¼šå®‰è£ä¾è³´

```bash
npm install
```

### ç¬¬ä¸‰æ­¥ï¼šè¨­ç½®ç’°å¢ƒè®Šæ•¸

```bash
cp .env.example .env
# é»˜èªé…ç½®å·²æ­£ç¢ºï¼ˆæœ¬åœ°é–‹ç™¼ï¼‰
```

### ç¬¬å››æ­¥ï¼šé‹è¡Œæ¸¬è©¦

#### æ–¹å¼ 1ï¼šé‹è¡Œæ‰€æœ‰æ¸¬è©¦ï¼ˆæ¨è–¦ç”¨æ–¼ CIï¼‰

```bash
npm run test:all
```

#### æ–¹å¼ 2ï¼šä½¿ç”¨ UI æ¨¡å¼ï¼ˆæ¨è–¦ç”¨æ–¼é–‹ç™¼ï¼‰

```bash
npm run test:e2e:ui
```

é€™æœƒæ‰“é–‹ä¸€å€‹å¯è¦–åŒ–ç•Œé¢ï¼Œå¯ä»¥çœ‹åˆ°æ¯å€‹æ¸¬è©¦çš„åŸ·è¡Œéç¨‹ã€‚

#### æ–¹å¼ 3ï¼šèª¿è©¦æ¨¡å¼

```bash
npm run test:e2e:debug
```

é€™æœƒæ‰“é–‹ Playwright Inspectorï¼Œå¯ä»¥é€æ­¥åŸ·è¡Œæ¸¬è©¦ã€‚

### ç¬¬äº”æ­¥ï¼šæŸ¥çœ‹çµæœ

```bash
# æŸ¥çœ‹æ¸¬è©¦å ±å‘Š
npm run report

# æˆ–ç›´æ¥æ‰“é–‹ HTML å ±å‘Š
open test-results/index.html
```

---

## ğŸ“‹ å¸¸ç”¨å‘½ä»¤

```bash
# E2E æ¸¬è©¦
npm run test:e2e              # é‹è¡Œæ‰€æœ‰ E2E æ¸¬è©¦
npm run test:e2e:ui          # UI æ¨¡å¼ï¼ˆæ¨è–¦é–‹ç™¼ç”¨ï¼‰
npm run test:e2e:headed      # æœ‰é ­ç€è¦½å™¨ï¼ˆçœ‹åˆ°ç€è¦½å™¨æ“ä½œï¼‰
npm run test:e2e:debug       # èª¿è©¦æ¨¡å¼

# API æ¸¬è©¦
npm run test:api             # é‹è¡Œæ‰€æœ‰ API æ¸¬è©¦
npm run test:api:watch       # ç›£è¦–æ¨¡å¼ï¼ˆæ”¹å‹•è‡ªå‹•é‡æ–°åŸ·è¡Œï¼‰

# æ‰€æœ‰æ¸¬è©¦
npm run test:all             # E2E + API æ¸¬è©¦

# ç‰¹å®šæ¸¬è©¦
npx playwright test tests/auth.spec.ts           # æŒ‡å®šæ–‡ä»¶
npx playwright test -g "should login"            # æŒ‰åç¨±éæ¿¾
npx playwright test --grep "@critical"           # æŒ‰æ¨™ç±¤éæ¿¾

# å ±å‘Šå’Œæ¸…ç†
npm run report               # æŸ¥çœ‹ HTML å ±å‘Š
npm run lint                # æª¢æŸ¥ä»£ç¢¼é¢¨æ ¼
npm run format              # æ ¼å¼åŒ–ä»£ç¢¼
```

---

## ğŸ“Š æ¸¬è©¦æ¦‚è¿°

### æ¸¬è©¦çµæ§‹

```
e2e-tests/
â”œâ”€â”€ èªè­‰æ¸¬è©¦ (auth.spec.ts)
â”‚   â”œâ”€â”€ ç”¨æˆ¶è¨»å†Š
â”‚   â”œâ”€â”€ ç”¨æˆ¶ç™»å…¥
â”‚   â”œâ”€â”€ é©—è­‰éŒ¯èª¤
â”‚   â””â”€â”€ æœƒè©±ç®¡ç†
â”‚
â”œâ”€â”€ å…§å®¹è§€çœ‹ (content-viewing.spec.ts)
â”‚   â”œâ”€â”€ å…§å®¹åˆ—è¡¨
â”‚   â”œâ”€â”€ æœå°‹å’Œç¯©é¸
â”‚   â”œâ”€â”€ æ’åº
â”‚   â””â”€â”€ æ”¶è—
â”‚
â”œâ”€â”€ å‰µä½œè€…ç®¡ç† (creator-management.spec.ts)
â”‚   â”œâ”€â”€ å…§å®¹ä¸Šå‚³
â”‚   â”œâ”€â”€ ç·¨è¼¯å’Œåˆªé™¤
â”‚   â”œâ”€â”€ æŸ¥çœ‹åˆ†æ
â”‚   â””â”€â”€ æ€§èƒ½æŒ‡æ¨™
â”‚
â”œâ”€â”€ æ”¯ä»˜æµç¨‹ (payment.spec.ts)
â”‚   â”œâ”€â”€ è¨‚é–±è¨ˆåŠƒ
â”‚   â”œâ”€â”€ Stripe æ”¯ä»˜
â”‚   â”œâ”€â”€ ç™¼ç¥¨ç®¡ç†
â”‚   â””â”€â”€ æ€§èƒ½æ¸¬è©¦
â”‚
â””â”€â”€ API æ¸¬è©¦ (api.spec.ts)
    â”œâ”€â”€ Auth Service API
    â”œâ”€â”€ Content Service API
    â”œâ”€â”€ Payment Service API
    â””â”€â”€ Recommendation Service API
```

### åŸ·è¡Œæ™‚é–“

- **E2E æ¸¬è©¦**: 8-10 åˆ†é˜
- **API æ¸¬è©¦**: 3-5 åˆ†é˜
- **ç¸½è¨ˆ**: < 15 åˆ†é˜ âœ…

---

## ğŸ”§ å¸¸è¦‹å•é¡Œ

### Q: æ¸¬è©¦å¤±æ•—äº†æ€éº¼è¾¦ï¼Ÿ

**A:** æŒ‰ç…§ä»¥ä¸‹æ­¥é©Ÿæ’æŸ¥ï¼š

1. æª¢æŸ¥éŒ¯èª¤ä¿¡æ¯

```bash
npm run test:e2e  # æŸ¥çœ‹è¼¸å‡º
```

2. æŸ¥çœ‹è¦–é »ï¼ˆè‡ªå‹•éŒ„è£½å¤±æ•—çš„æ¸¬è©¦ï¼‰

```bash
open playwright-report/
```

3. ä½¿ç”¨ UI æ¨¡å¼é‡ç¾å•é¡Œ

```bash
npm run test:e2e:ui
```

4. æŸ¥çœ‹å®Œæ•´æŒ‡å—

åƒè€ƒ `E2E_TESTING_GUIDE.md`

### Q: éœ€è¦é‹è¡Œç‰¹å®šçš„æ¸¬è©¦å—ï¼Ÿ

**A:** æœ‰å¹¾ç¨®æ–¹å¼ï¼š

```bash
# æŒ‰æ–‡ä»¶
npx playwright test tests/auth.spec.ts

# æŒ‰æ¸¬è©¦åç¨±
npx playwright test -g "should login"

# æŒ‰æ¨™ç±¤
npx playwright test --grep "@critical"

# æŒ‰ç€è¦½å™¨
npx playwright test --project=chromium
```

### Q: å¦‚ä½•åœ¨æœ¬åœ°èª¿è©¦ï¼Ÿ

**A:** ä½¿ç”¨ UI æ¨¡å¼æ˜¯æœ€ç°¡å–®çš„æ–¹å¼ï¼š

```bash
npm run test:e2e:ui
```

æˆ–ä½¿ç”¨èª¿è©¦å™¨ï¼š

```bash
npm run test:e2e:debug
```

---

## ğŸ“– è©³ç´°æ–‡æª”

- **å®Œæ•´æŒ‡å—**: æŸ¥çœ‹ `E2E_TESTING_GUIDE.md`
- **é …ç›®æ¦‚è¿°**: æŸ¥çœ‹ `PROJECT_OVERVIEW.md`
- **API æ–‡æª”**: æŸ¥çœ‹å„æœå‹™çš„ API.md

---

## âœ… æª¢æŸ¥æ¸…å–®

é–‹å§‹å‰ç¢ºä¿ï¼š

- [ ] Node.js 20+ å·²å®‰è£
- [ ] æ‰€æœ‰ä¾è³´å·²å®‰è£ï¼ˆ`npm install`ï¼‰
- [ ] ç’°å¢ƒè®Šæ•¸å·²è¨­ç½®ï¼ˆ`.env` æ–‡ä»¶ï¼‰
- [ ] å¾Œç«¯æœå‹™å¯ä»¥å•Ÿå‹•
- [ ] å‰ç«¯å¯ä»¥å•Ÿå‹•

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **é–‹ç™¼æ¸¬è©¦æ™‚**ï¼šä½¿ç”¨ `npm run test:e2e:ui`
2. **æäº¤å‰**ï¼šé‹è¡Œ `npm run test:all` ç¢ºä¿æ‰€æœ‰æ¸¬è©¦é€šé
3. **CI/CD ä¸­**ï¼šè‡ªå‹•é‹è¡Œ GitHub Actions å·¥ä½œæµ

---

## ğŸ’¡ æç¤º

- ä½¿ç”¨ `@critical` æ¨™ç±¤å¿«é€Ÿé‹è¡Œé—œéµæµç¨‹æ¸¬è©¦
- ä½¿ç”¨ `@performance` æ¨™ç±¤é‹è¡Œæ€§èƒ½æ¸¬è©¦
- é–‹ç™¼æ™‚ä½¿ç”¨ `test.only` é›†ä¸­åœ¨ä¸€å€‹æ¸¬è©¦
- ä½¿ç”¨ `test.skip` è‡¨æ™‚è·³éæ¸¬è©¦

```typescript
// ç¤ºä¾‹
test.only('focus on this test', async () => {});
test.skip('skip this for now', async () => {});
```

---

æ›´å¤šå¹«åŠ©ï¼Œè«‹æŸ¥çœ‹ `E2E_TESTING_GUIDE.md` ä¸­çš„å®Œæ•´æ–‡æª”ã€‚
