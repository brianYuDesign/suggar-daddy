# Infrastructure Architecture Diagram

## ğŸ—ï¸ Current Running Infrastructure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     HOST MACHINE (macOS)                         â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚         Docker Network: suggar-daddy-network               â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â”‚
â”‚  â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis     â”‚  â”‚  Zookeeper   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚   :5432      â”‚  â”‚    :6379     â”‚  â”‚    :2181     â”‚    â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚  postgres:   â”‚  â”‚  redis:7-    â”‚  â”‚  cp-zookeeperâ”‚    â”‚ â”‚
â”‚  â”‚  â”‚  15-alpine   â”‚  â”‚  alpine      â”‚  â”‚  :7.5.0      â”‚    â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ âœ… Healthy   â”‚  â”‚ âœ… Healthy   â”‚  â”‚ âœ… Running   â”‚    â”‚ â”‚
â”‚  â”‚  â”‚ 57.45 MiB    â”‚  â”‚ 12.15 MiB    â”‚  â”‚ 205.9 MiB    â”‚    â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â”‚ â”‚
â”‚  â”‚                                               â”‚            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚              Apache Kafka                 â”‚          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚          :9092 (internal)                 â”‚          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚          :9094 (external)                 â”‚          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                           â”‚          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚         cp-kafka:7.5.0                    â–¼          â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                                    (depends on)      â”‚ â”‚ â”‚
â”‚  â”‚  â”‚         âœ… Healthy                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚         479.1 MiB                                    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  ğŸ“Š Port Mappings:                                               â”‚
â”‚  â€¢ PostgreSQL:  localhost:5432  â†’ postgres:5432                 â”‚
â”‚  â€¢ Redis:       localhost:6379  â†’ redis:6379                    â”‚
â”‚  â€¢ Kafka:       localhost:9094  â†’ kafka:9092                    â”‚
â”‚  â€¢ Zookeeper:   localhost:2181  â†’ zookeeper:2181               â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Data Persistence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Docker Volumes                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  postgres_data â”€â”€â”€â”€â”€â”€â”€â”€â–º PostgreSQL Database Files          â”‚
â”‚  redis_data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Redis Persistence Files            â”‚
â”‚  kafka_data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Kafka Logs & Data                  â”‚
â”‚  zookeeper_data â”€â”€â”€â”€â”€â”€â”€â–º Zookeeper Data                     â”‚
â”‚  zookeeper_logs â”€â”€â”€â”€â”€â”€â”€â–º Zookeeper Logs                     â”‚
â”‚                                                               â”‚
â”‚  âš ï¸ Persisted across container restarts                     â”‚
â”‚  âš ï¸ Only deleted with: docker-compose down -v               â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Service Dependencies

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Zookeeper  â”‚
                    â”‚   :2181     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Kafka    â”‚
                    â”‚ :9092/:9094 â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PostgreSQL  â”‚                 â”‚    Redis    â”‚
    â”‚   :5432     â”‚                 â”‚    :6379    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Application Services (Ready to Deploy)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application Layer                           â”‚
â”‚                (Not yet deployed in Stage 2)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ API Gateway â”‚   â”‚    Auth     â”‚   â”‚    User     â”‚        â”‚
â”‚  â”‚   :3000     â”‚   â”‚  Service    â”‚   â”‚  Service    â”‚        â”‚
â”‚  â”‚             â”‚   â”‚   :3002     â”‚   â”‚   :3001     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Payment    â”‚   â”‚Subscription â”‚   â”‚ DB Writer   â”‚        â”‚
â”‚  â”‚  Service    â”‚   â”‚  Service    â”‚   â”‚  Service    â”‚        â”‚
â”‚  â”‚   :3007     â”‚   â”‚   :3009     â”‚   â”‚   :3010     â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                                â”‚
â”‚         â†“â†“â†“          â†“â†“â†“          â†“â†“â†“          â†“â†“â†“          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚            â”‚            â”‚            â”‚
          â–¼            â–¼            â–¼            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Infrastructure Layer (Current)          â”‚
    â”‚  PostgreSQL  â”‚  Redis  â”‚  Kafka  â”‚ Zookeeperâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ Connection Patterns

### From Application Services (Docker Network)
```javascript
// PostgreSQL
const dbConfig = {
  host: 'postgres',
  port: 5432,
  database: 'suggar_daddy',
  username: 'postgres',
  password: 'postgres'
};

// Redis
const redisConfig = {
  host: 'redis',
  port: 6379
};

// Kafka
const kafkaConfig = {
  brokers: ['kafka:9092']
};
```

### From Host Machine (Local Development)
```javascript
// PostgreSQL
const dbConfig = {
  host: 'localhost',
  port: 5432,
  database: 'suggar_daddy',
  username: 'postgres',
  password: 'postgres'
};

// Redis
const redisConfig = {
  host: 'localhost',
  port: 6379
};

// Kafka
const kafkaConfig = {
  brokers: ['localhost:9094']
};
```

## ğŸ“Š Resource Overview

| Service    | CPU Usage | Memory Usage | Status    | Image               |
|------------|-----------|--------------|-----------|---------------------|
| PostgreSQL | ~0.00%    | 57.45 MiB    | âœ… Healthy | postgres:15-alpine  |
| Redis      | ~1.22%    | 12.15 MiB    | âœ… Healthy | redis:7-alpine      |
| Kafka      | ~5.10%    | 479.1 MiB    | âœ… Healthy | cp-kafka:7.5.0      |
| Zookeeper  | ~0.30%    | 205.9 MiB    | âœ… Running | cp-zookeeper:7.5.0  |
| **Total**  | **~6.62%**| **~754 MiB** | **All OK** |                     |

## ğŸ” Security Status

| Component  | Authentication | Encryption | Production Ready |
|------------|---------------|------------|------------------|
| PostgreSQL | âš ï¸ Default pw | âŒ No SSL  | âŒ No            |
| Redis      | âŒ None       | âŒ No SSL  | âŒ No            |
| Kafka      | âŒ None       | âŒ Plain   | âŒ No            |
| Zookeeper  | âŒ None       | âŒ Plain   | âŒ No            |

âš ï¸ **Current configuration is for DEVELOPMENT ONLY**

## âœ… Health Check Summary

```bash
# All services responding correctly
âœ… PostgreSQL - accepting connections
âœ… Redis - PONG
âœ… Kafka - broker API accessible
âœ… Zookeeper - port 2181 bound

# Network connectivity verified
âœ… Container-to-container communication
âœ… Host-to-container access

# Data persistence verified
âœ… All volumes created and mounted
âœ… PostgreSQL extensions installed
âœ… Redis AOF enabled
âœ… Kafka topics can be created
```

---

**Diagram Generated:** $(date '+%Y-%m-%d %H:%M:%S')
**Infrastructure Status:** ğŸŸ¢ All Systems Operational
