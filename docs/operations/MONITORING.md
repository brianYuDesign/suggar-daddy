# ğŸ“Š Suggar Daddy ç›£æ§ç³»çµ±æ–‡æª”

## ğŸ“‹ ç›®éŒ„

- [ç³»çµ±æ¦‚è¦½](#ç³»çµ±æ¦‚è¦½)
- [å¿«é€Ÿé–‹å§‹](#å¿«é€Ÿé–‹å§‹)
- [æ¶æ§‹èªªæ˜](#æ¶æ§‹èªªæ˜)
- [Dashboard ä½¿ç”¨æŒ‡å—](#dashboard-ä½¿ç”¨æŒ‡å—)
- [å‘Šè­¦è™•ç† SOP](#å‘Šè­¦è™•ç†-sop)
- [å¸¸è¦‹å•é¡Œæ’æŸ¥](#å¸¸è¦‹å•é¡Œæ’æŸ¥)
- [é…ç½®èªªæ˜](#é…ç½®èªªæ˜)
- [æœ€ä½³å¯¦è¸](#æœ€ä½³å¯¦è¸)

---

## ç³»çµ±æ¦‚è¦½

Suggar Daddy ç›£æ§ç³»çµ±æ˜¯åŸºæ–¼ **Prometheus + Grafana + Alertmanager** çš„å®Œæ•´ç›£æ§è§£æ±ºæ–¹æ¡ˆï¼Œç”¨æ–¼ç›£æ§ 11 å€‹å¾®æœå‹™çš„å¥åº·ç‹€æ…‹ã€æ•ˆèƒ½æŒ‡æ¨™å’Œæ¥­å‹™æŒ‡æ¨™ã€‚

### ğŸ¯ ç›£æ§ç›®æ¨™

- **11 å€‹å¾®æœå‹™**ï¼šapi-gateway, auth-service, user-service, matching-service, notification-service, messaging-service, content-service, payment-service, media-service, subscription-service, db-writer-service, admin-service
- **åŸºç¤è¨­æ–½**ï¼šPostgreSQL, Redis, Kafka
- **ç³»çµ±æŒ‡æ¨™**ï¼šCPU, Memory, Disk, Network
- **å®¹å™¨æŒ‡æ¨™**ï¼šDocker containers, resource usage
- **æ¥­å‹™æŒ‡æ¨™**ï¼šè¨»å†Šã€æ”¯ä»˜ã€é…å°ã€è¨Šæ¯ç­‰

### ğŸ“Š æ ¸å¿ƒçµ„ä»¶

| çµ„ä»¶ | ç«¯å£ | ç”¨é€” | è¨ªå•åœ°å€ |
|------|------|------|----------|
| **Prometheus** | 9090 | æŒ‡æ¨™æ”¶é›†èˆ‡å­˜å„² | http://localhost:9090 |
| **Grafana** | 3001 | æ•¸æ“šå¯è¦–åŒ– | http://localhost:3001 |
| **Alertmanager** | 9093 | å‘Šè­¦ç®¡ç† | http://localhost:9093 |
| **Node Exporter** | 9100 | ç³»çµ±æŒ‡æ¨™æ”¶é›† | http://localhost:9100 |
| **cAdvisor** | 8080 | å®¹å™¨æŒ‡æ¨™æ”¶é›† | http://localhost:8080 |
| **Postgres Exporter** | 9187 | PostgreSQL æŒ‡æ¨™ | http://localhost:9187 |
| **Redis Exporter** | 9121 | Redis æŒ‡æ¨™ | http://localhost:9121 |

---

## å¿«é€Ÿé–‹å§‹

### 1ï¸âƒ£ å‰ç½®è¦æ±‚

- Docker å’Œ Docker Compose å·²å®‰è£
- ä¸»æ‡‰ç”¨ç³»çµ±å·²å•Ÿå‹•ï¼ˆéœ€è¦ `suggar-daddy-network` ç¶²è·¯ï¼‰
- è‡³å°‘ 4GB å¯ç”¨è¨˜æ†¶é«”

### 2ï¸âƒ£ å•Ÿå‹•ç›£æ§ç³»çµ±

```bash
# é€²å…¥ç›£æ§ç›®éŒ„
cd infrastructure/monitoring

# å•Ÿå‹•æ‰€æœ‰ç›£æ§æœå‹™
docker-compose -f docker-compose.monitoring.yml up -d

# æŸ¥çœ‹æœå‹™ç‹€æ…‹
docker-compose -f docker-compose.monitoring.yml ps

# æŸ¥çœ‹æ—¥èªŒ
docker-compose -f docker-compose.monitoring.yml logs -f
```

### 3ï¸âƒ£ è¨ªå•ç›£æ§ç•Œé¢

#### Grafanaï¼ˆæ¨è–¦å…¥å£ï¼‰
- **URL**: http://localhost:3001
- **é è¨­å¸³è™Ÿ**: `admin`
- **é è¨­å¯†ç¢¼**: `admin123`ï¼ˆé¦–æ¬¡ç™»å…¥æœƒè¦æ±‚ä¿®æ”¹ï¼‰

#### Prometheus
- **URL**: http://localhost:9090
- ç”¨æ–¼æŸ¥è©¢åŸå§‹æŒ‡æ¨™å’Œé©—è­‰å‘Šè­¦è¦å‰‡

#### Alertmanager
- **URL**: http://localhost:9093
- ç”¨æ–¼æŸ¥çœ‹å’Œç®¡ç†å‘Šè­¦

### 4ï¸âƒ£ æŸ¥çœ‹ Dashboards

ç™»å…¥ Grafana å¾Œï¼Œåœ¨å·¦å´é¸å–®é¸æ“‡ **Dashboards**ï¼Œå¯çœ‹åˆ°ä¸‰å€‹ä¸»è¦ Dashboardï¼š

1. **ç³»çµ±æŒ‡æ¨™ç›£æ§** - ç³»çµ±è³‡æºä½¿ç”¨æƒ…æ³
2. **æ‡‰ç”¨æŒ‡æ¨™ç›£æ§** - å¾®æœå‹™æ•ˆèƒ½æŒ‡æ¨™
3. **æ¥­å‹™æŒ‡æ¨™ç›£æ§** - æ¥­å‹™ KPI å’ŒæŒ‡æ¨™

### 5ï¸âƒ£ åœæ­¢ç›£æ§ç³»çµ±

```bash
# åœæ­¢æ‰€æœ‰æœå‹™
docker-compose -f docker-compose.monitoring.yml down

# åœæ­¢ä¸¦åˆªé™¤æ•¸æ“š
docker-compose -f docker-compose.monitoring.yml down -v
```

---

## æ¶æ§‹èªªæ˜

### ğŸ—ï¸ ç³»çµ±æ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ç›£æ§ç³»çµ±æ¶æ§‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â”‚  å¾®æœå‹™ç¾¤çµ„   â”‚â”€â”€â”€â”€â–¶â”‚  Prometheus  â”‚â”€â”€â”€â”€â–¶â”‚   Grafana    â”‚
â”‚  (11 å€‹æœå‹™)  â”‚     â”‚   (æŒ‡æ¨™æ”¶é›†)  â”‚     â”‚  (æ•¸æ“šå±•ç¤º)   â”‚
â”‚              â”‚     â”‚              â”‚     â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚             â”‚              â”‚              â”‚
â”‚  Node        â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚ Alertmanager â”‚
â”‚  Exporter    â”‚             â”‚              â”‚  (å‘Šè­¦ç®¡ç†)   â”‚
â”‚  (ç³»çµ±æŒ‡æ¨™)   â”‚             â”‚              â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚              â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚             â”‚              â”‚              â”‚
â”‚  cAdvisor    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”‚ Slack/Email  â”‚
â”‚  (å®¹å™¨æŒ‡æ¨™)   â”‚             â”‚              â”‚  (é€šçŸ¥æ¸ é“)   â”‚
â”‚              â”‚             â”‚              â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  DB/Cache    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚  Exporters   â”‚
â”‚ (PG, Redis)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“Š æ•¸æ“šæµç¨‹

1. **æŒ‡æ¨™æ”¶é›†**ï¼š
   - å¾®æœå‹™æš´éœ² `/metrics` ç«¯é»ï¼ˆPrometheus æ ¼å¼ï¼‰
   - Exporters å¾è³‡æ–™åº«ã€å¿«å–ç­‰æ”¶é›†æŒ‡æ¨™
   - Node Exporter æ”¶é›†ç³»çµ±ç´šæŒ‡æ¨™

2. **æŒ‡æ¨™å­˜å„²**ï¼š
   - Prometheus å®šæœŸï¼ˆ15ç§’ï¼‰æŠ“å–æŒ‡æ¨™
   - æ•¸æ“šä¿ç•™ 30 å¤©

3. **å‘Šè­¦è©•ä¼°**ï¼š
   - Prometheus æ¯ 15 ç§’è©•ä¼°å‘Šè­¦è¦å‰‡
   - è§¸ç™¼å‘Šè­¦ç™¼é€åˆ° Alertmanager

4. **å‘Šè­¦è™•ç†**ï¼š
   - Alertmanager æ ¹æ“šè·¯ç”±è¦å‰‡åˆ†ç™¼å‘Šè­¦
   - æ”¯æŒ Slackã€Email ç­‰é€šçŸ¥æ¸ é“
   - å¯¦ç¾å‘Šè­¦åˆ†çµ„ã€æŠ‘åˆ¶å’Œéœé»˜

5. **æ•¸æ“šå±•ç¤º**ï¼š
   - Grafana å¾ Prometheus æŸ¥è©¢æ•¸æ“š
   - æä¾›è±å¯Œçš„è¦–è¦ºåŒ–åœ–è¡¨
   - æ”¯æŒè‡ªå®šç¾© Dashboard

---

## Dashboard ä½¿ç”¨æŒ‡å—

### ğŸ“ˆ 1. ç³»çµ±æŒ‡æ¨™ç›£æ§ (System Metrics)

**ç”¨é€”**ï¼šç›£æ§ç³»çµ±è³‡æºä½¿ç”¨æƒ…æ³ï¼Œç¢ºä¿åŸºç¤è¨­æ–½å¥åº·ã€‚

#### ä¸»è¦æŒ‡æ¨™

| æŒ‡æ¨™ | æè¿° | æ­£å¸¸ç¯„åœ | å‘Šè­¦é–¾å€¼ |
|------|------|---------|---------|
| **å®¹å™¨ CPU ä½¿ç”¨ç‡** | å„å®¹å™¨çš„ CPU ä½¿ç”¨ç™¾åˆ†æ¯” | < 70% | > 80% |
| **å®¹å™¨è¨˜æ†¶é«”ä½¿ç”¨ç‡** | å„å®¹å™¨çš„è¨˜æ†¶é«”ä½¿ç”¨ç™¾åˆ†æ¯” | < 70% | > 80% |
| **ç£ç¢Ÿä½¿ç”¨ç‡** | ç£ç¢Ÿç©ºé–“ä½¿ç”¨ç™¾åˆ†æ¯” | < 75% | > 85% |
| **ä¸»æ©Ÿ CPU ä½¿ç”¨ç‡** | å®¿ä¸»æ©Ÿ CPU æ•´é«”ä½¿ç”¨ç‡ | < 70% | > 80% |
| **ä¸»æ©Ÿè¨˜æ†¶é«”ä½¿ç”¨ç‡** | å®¿ä¸»æ©Ÿè¨˜æ†¶é«”ä½¿ç”¨ç‡ | < 75% | > 85% |
| **ç¶²è·¯æµé‡** | ç¶²è·¯æ”¶ç™¼é€Ÿç‡ | - | - |
| **ç£ç¢Ÿ I/O** | ç£ç¢Ÿè®€å¯«æ“ä½œæ•¸ | - | - |

#### ä½¿ç”¨å ´æ™¯

- **å®¹é‡è¦åŠƒ**ï¼šè§€å¯Ÿè³‡æºä½¿ç”¨è¶¨å‹¢ï¼Œé æ¸¬ä½•æ™‚éœ€è¦æ“´å±•
- **æ•ˆèƒ½èª¿å„ª**ï¼šè­˜åˆ¥è³‡æºç“¶é ¸
- **å•é¡Œè¨ºæ–·**ï¼šå¿«é€Ÿå®šä½è³‡æºç›¸é—œå•é¡Œ

#### æ“ä½œæŠ€å·§

```plaintext
1. æ™‚é–“ç¯„åœé¸æ“‡ï¼šå³ä¸Šè§’å¯é¸æ“‡æ™‚é–“ç¯„åœï¼ˆ1h, 6h, 24h, 7dï¼‰
2. è‡ªå‹•åˆ·æ–°ï¼šè¨­ç½® 30s è‡ªå‹•åˆ·æ–°
3. åœ–è¡¨ç¸®æ”¾ï¼šé»æ“Šä¸¦æ‹–å‹•å¯æ”¾å¤§ç‰¹å®šæ™‚é–“æ®µ
4. åœ–ä¾‹ç¯©é¸ï¼šé»æ“Šåœ–ä¾‹å¯éš±è—/é¡¯ç¤ºç‰¹å®šæŒ‡æ¨™
```

---

### ğŸ“Š 2. æ‡‰ç”¨æŒ‡æ¨™ç›£æ§ (Application Metrics)

**ç”¨é€”**ï¼šç›£æ§å¾®æœå‹™çš„æ•ˆèƒ½å’Œå¯ç”¨æ€§ã€‚

#### ä¸»è¦æŒ‡æ¨™

| æŒ‡æ¨™ | æè¿° | æ­£å¸¸ç¯„åœ | å‘Šè­¦é–¾å€¼ |
|------|------|---------|---------|
| **RPS** | æ¯ç§’è«‹æ±‚æ•¸ | - | - |
| **éŒ¯èª¤ç‡** | 5xx/4xx éŒ¯èª¤ç‡ | < 1% | 5xx > 5% |
| **P50/P95/P99 å»¶é²** | å›æ‡‰æ™‚é–“ç™¾åˆ†ä½æ•¸ | P95 < 300ms | P95 > 500ms |
| **HTTP ç‹€æ…‹ç¢¼** | å„ç‹€æ…‹ç¢¼çš„è«‹æ±‚åˆ†ä½ˆ | - | - |
| **PostgreSQL é€£ç·š** | è³‡æ–™åº«é€£ç·šä½¿ç”¨ç‡ | < 70% | > 80% |
| **Redis å‘½ä¸­ç‡** | å¿«å–å‘½ä¸­ç‡ | > 90% | < 80% |
| **å®¹å™¨é‡å•Ÿ** | å®¹å™¨é‡å•Ÿé »ç‡ | 0 | > 0.1/15m |

#### ä½¿ç”¨å ´æ™¯

- **æ•ˆèƒ½ç›£æ§**ï¼šè¿½è¹¤ API å›æ‡‰æ™‚é–“å’Œååé‡
- **å¯ç”¨æ€§ç›£æ§**ï¼šç›£æ§éŒ¯èª¤ç‡å’Œæœå‹™å¥åº·
- **è³‡æ–™åº«å¥åº·**ï¼šæª¢æŸ¥é€£ç·šæ± å’ŒæŸ¥è©¢æ•ˆèƒ½
- **å¿«å–æ•ˆèƒ½**ï¼šå„ªåŒ–å¿«å–ç­–ç•¥

#### é‡é»é—œæ³¨æœå‹™

```plaintext
Critical (P0) - æ ¸å¿ƒæœå‹™ï¼Œå¿…é ˆä¿æŒé«˜å¯ç”¨ï¼š
â”œâ”€ api-gateway     (å…¥å£ç¶²é—œ)
â”œâ”€ auth-service    (èªè­‰æœå‹™)
â”œâ”€ user-service    (ç”¨æˆ¶æœå‹™)
â””â”€ payment-service (æ”¯ä»˜æœå‹™)

High Priority (P1) - é‡è¦æ¥­å‹™æœå‹™ï¼š
â”œâ”€ matching-service      (é…å°æœå‹™)
â”œâ”€ messaging-service     (è¨Šæ¯æœå‹™)
â”œâ”€ notification-service  (é€šçŸ¥æœå‹™)
â””â”€ subscription-service  (è¨‚é–±æœå‹™)

Standard (P2) - æ”¯æ´æœå‹™ï¼š
â”œâ”€ content-service    (å…§å®¹æœå‹™)
â”œâ”€ media-service      (åª’é«”æœå‹™)
â”œâ”€ db-writer-service  (è³‡æ–™å¯«å…¥)
â””â”€ admin-service      (ç®¡ç†æœå‹™)
```

---

### ğŸ’¼ 3. æ¥­å‹™æŒ‡æ¨™ç›£æ§ (Business Metrics)

**ç”¨é€”**ï¼šè¿½è¹¤æ¥­å‹™ KPIï¼Œäº†è§£ç”¢å“å¥åº·åº¦ã€‚

#### ä¸»è¦æŒ‡æ¨™

| æŒ‡æ¨™ | æè¿° | ç›®æ¨™ |
|------|------|------|
| **ä»Šæ—¥æ–°è¨»å†Šç”¨æˆ¶** | 24å°æ™‚å…§æ–°è¨»å†Šæ•¸ | æŒçºŒå¢é•· |
| **ç•¶å‰æ´»èºç”¨æˆ¶** | åœ¨ç·šç”¨æˆ¶æ•¸ | - |
| **æ”¯ä»˜æˆåŠŸç‡** | æ”¯ä»˜äº¤æ˜“æˆåŠŸç‡ | > 95% |
| **ä»Šæ—¥ç‡Ÿæ”¶** | 24å°æ™‚ç‡Ÿæ”¶ï¼ˆUSDï¼‰| æŒçºŒå¢é•· |
| **ç”¨æˆ¶è¨»å†Šè¶¨å‹¢** | è¨»å†Šé€Ÿç‡è®ŠåŒ– | ç©©å®šæˆ–ä¸Šå‡ |
| **æ”¯ä»˜äº¤æ˜“é‡** | æ¯å°æ™‚äº¤æ˜“æ•¸ | - |
| **é…å°æ´»å‹•** | æ»‘å‹•å’Œé…å°æˆåŠŸç‡ | - |
| **è¨Šæ¯ç™¼é€é‡** | æ¯ç§’è¨Šæ¯æ•¸ | - |
| **æ´»èºè¨‚é–±æ•¸** | ä»˜è²»ç”¨æˆ¶æ•¸ | æŒçºŒå¢é•· |
| **è¨‚é–±çºŒè¨‚ç‡** | 30å¤©å…§çºŒè¨‚ç‡ | > 85% |
| **MRR** | æœˆåº¦ç¶“å¸¸æ€§æ”¶å…¥ | æŒçºŒå¢é•· |

#### ä½¿ç”¨å ´æ™¯

- **æ¥­å‹™å¥åº·**ï¼šå¿«é€Ÿäº†è§£ç”¢å“é‹ç‡Ÿç‹€æ³
- **ç‡Ÿæ”¶è¿½è¹¤**ï¼šç›£æ§æ”¯ä»˜å’Œè¨‚é–±æŒ‡æ¨™
- **ç”¨æˆ¶å¢é•·**ï¼šè¿½è¹¤è¨»å†Šå’Œæ´»èºåº¦
- **åŠŸèƒ½ä½¿ç”¨**ï¼šäº†è§£é…å°ã€è¨Šæ¯ç­‰åŠŸèƒ½ä½¿ç”¨æƒ…æ³

#### å‘Šè­¦å„ªå…ˆç´š

```plaintext
Critical (ç«‹å³è™•ç†):
â””â”€ æ”¯ä»˜æˆåŠŸç‡ < 95%  (ç›´æ¥å½±éŸ¿ç‡Ÿæ”¶)

Warning (1å°æ™‚å…§è™•ç†):
â”œâ”€ è¨»å†Šç‡ä¸‹é™ > 30%   (æ½›åœ¨æ¥­å‹™å•é¡Œ)
â”œâ”€ è¨‚é–±çºŒè¨‚ç‡ < 80%   (æµå¤±ç‡å¢åŠ )
â””â”€ MRR ä¸‹é™           (ç‡Ÿæ”¶ä¸‹æ»‘)
```

---

## å‘Šè­¦è™•ç† SOP

### ğŸš¨ å‘Šè­¦ç´šåˆ¥

| ç´šåˆ¥ | å„ªå…ˆç´š | éŸ¿æ‡‰æ™‚é–“ | é€šçŸ¥æ¸ é“ | è™•ç†è¦æ±‚ |
|------|--------|---------|---------|---------|
| **Critical** | P0 | ç«‹å³ | Slack + Email | ç«‹å³è™•ç†ï¼Œå¿…è¦æ™‚å–šé†’ on-call |
| **Warning** | P1 | 1å°æ™‚å…§ | Slack | å·¥ä½œæ™‚é–“å…§è™•ç† |
| **Info** | P2 | 24å°æ™‚å…§ | Slack | å®šæœŸæª¢æŸ¥è™•ç† |

### ğŸ“‹ Critical å‘Šè­¦è™•ç†æµç¨‹

#### 1. æœå‹™ä¸å¯ç”¨ (ServiceDown)

**ç—‡ç‹€**ï¼šæœå‹™åœæ­¢éŸ¿æ‡‰è¶…é 1 åˆ†é˜

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥æœå‹™ç‹€æ…‹
docker ps | grep <service-name>

# 2. æŸ¥çœ‹æœå‹™æ—¥èªŒ
docker logs <container-id> --tail 100

# 3. æª¢æŸ¥è³‡æºä½¿ç”¨
docker stats <container-id>

# 4. å˜—è©¦é‡å•Ÿæœå‹™
docker restart <container-id>

# 5. å¦‚æœç„¡æ³•æ¢å¾©ï¼Œå›æ»¾åˆ°ä¸Šä¸€å€‹ç©©å®šç‰ˆæœ¬
docker-compose up -d <service-name>

# 6. é€šçŸ¥åœ˜éšŠä¸¦è¨˜éŒ„äº‹ä»¶
```

**æ ¹å› åˆ†æ**ï¼š
- [ ] OOM (è¨˜æ†¶é«”ä¸è¶³)
- [ ] æœªæ•ç²çš„ç•°å¸¸
- [ ] è³‡æ–™åº«é€£ç·šå¤±æ•—
- [ ] ä¾è³´æœå‹™ä¸å¯ç”¨
- [ ] é…ç½®éŒ¯èª¤

---

#### 2. é«˜éŒ¯èª¤ç‡ (HighErrorRate)

**ç—‡ç‹€**ï¼š5xx éŒ¯èª¤ç‡ > 5%ï¼ŒæŒçºŒ 5 åˆ†é˜

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. è­˜åˆ¥éŒ¯èª¤é¡å‹
# æŸ¥çœ‹ Prometheus
http://localhost:9090/graph
# æŸ¥è©¢ï¼šsum by (status, service) (rate(http_requests_total{status=~"5.."}[5m]))

# 2. æŸ¥çœ‹è©³ç´°éŒ¯èª¤æ—¥èªŒ
docker logs <service> --tail 200 | grep ERROR

# 3. æª¢æŸ¥ä¾è³´æœå‹™
docker-compose ps
curl http://localhost:5432  # PostgreSQL
curl http://localhost:6379  # Redis

# 4. æª¢æŸ¥è³‡æ–™åº«é€£ç·š
docker exec -it <service> sh
# æ¸¬è©¦è³‡æ–™åº«é€£ç·š

# 5. å¦‚æœæ˜¯ç¨‹å¼ç¢¼å•é¡Œï¼Œæº–å‚™ hotfix
# å¦‚æœæ˜¯åŸºç¤è¨­æ–½å•é¡Œï¼Œä¿®å¾©ä¾è³´

# 6. ç›£æ§éŒ¯èª¤ç‡æ¢å¾©
```

**å¸¸è¦‹åŸå› **ï¼š
- [ ] è³‡æ–™åº«é€£ç·šæ± è€—ç›¡
- [ ] å¤–éƒ¨ API è¶…æ™‚
- [ ] è¨˜æ†¶é«”æ´©æ¼å°è‡´å´©æ½°
- [ ] è³‡æ–™é©—è­‰å¤±æ•—
- [ ] æ–°éƒ¨ç½²å¼•å…¥çš„ Bug

---

#### 3. é«˜ CPU/è¨˜æ†¶é«”ä½¿ç”¨ (CriticalCPUUsage / CriticalMemoryUsage)

**ç—‡ç‹€**ï¼šè³‡æºä½¿ç”¨ç‡ > 90%ï¼ŒæŒçºŒ 2 åˆ†é˜

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. ç¢ºèªè³‡æºä½¿ç”¨æƒ…æ³
docker stats <container-id>

# 2. æª¢æŸ¥æ˜¯å¦æœ‰ç•°å¸¸æµé‡
# Grafana > æ‡‰ç”¨æŒ‡æ¨™ > RPS

# 3. åˆ†æè³‡æºæ¶ˆè€—
# CPU é«˜ï¼š
docker exec -it <container> sh
top  # æŸ¥çœ‹é€²ç¨‹ CPU ä½¿ç”¨

# è¨˜æ†¶é«”é«˜ï¼š
docker exec -it <container> sh
ps aux --sort=-%mem | head  # æŸ¥çœ‹è¨˜æ†¶é«”ä½¿ç”¨

# 4. è‡¨æ™‚æ“´å®¹ï¼ˆå¦‚æœå¯èƒ½ï¼‰
docker-compose up -d --scale <service>=3

# 5. å„ªåŒ–è³‡æºé™åˆ¶ï¼ˆå¦‚æœéœ€è¦ï¼‰
# ç·¨è¼¯ docker-compose.yml å¢åŠ  memory/cpu limits

# 6. é•·æœŸï¼šåˆ†ææ•ˆèƒ½ç“¶é ¸ä¸¦å„ªåŒ–
```

**å„ªåŒ–æ–¹å‘**ï¼š
- [ ] å¢åŠ è³‡æºé™åˆ¶
- [ ] æ©«å‘æ“´å±•ï¼ˆå¢åŠ å¯¦ä¾‹ï¼‰
- [ ] ç¨‹å¼ç¢¼å„ªåŒ–ï¼ˆæ¸›å°‘è¨˜æ†¶é«”ä½¿ç”¨ï¼‰
- [ ] è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–
- [ ] å¼•å…¥å¿«å–

---

#### 4. è³‡æ–™åº«é€£ç·šæ•¸éé«˜ (PostgresCriticalConnections)

**ç—‡ç‹€**ï¼šé€£ç·šä½¿ç”¨ç‡ > 95%ï¼ŒæŒçºŒ 2 åˆ†é˜

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥ç•¶å‰é€£ç·š
docker exec -it postgres psql -U postgres -d suggar_daddy
SELECT count(*), state FROM pg_stat_activity GROUP BY state;

# 2. æŸ¥çœ‹é•·æ™‚é–“åŸ·è¡Œçš„æŸ¥è©¢
SELECT pid, now() - pg_stat_activity.query_start AS duration, query
FROM pg_stat_activity
WHERE state = 'active'
ORDER BY duration DESC;

# 3. çµ‚æ­¢ç•°å¸¸é€£ç·šï¼ˆè¬¹æ…æ“ä½œï¼‰
SELECT pg_terminate_backend(pid) FROM pg_stat_activity
WHERE state = 'idle in transaction' AND now() - query_start > interval '30 minutes';

# 4. æª¢æŸ¥é€£ç·šæ± é…ç½®
# å„æœå‹™çš„è³‡æ–™åº«é€£ç·šæ± è¨­ç½®

# 5. èª¿æ•´ max_connectionsï¼ˆå¦‚éœ€ï¼‰
ALTER SYSTEM SET max_connections = 200;
SELECT pg_reload_conf();

# 6. ç›£æ§é€£ç·šæ•¸æ¢å¾©
```

**é é˜²æªæ–½**ï¼š
- [ ] å„ªåŒ–é€£ç·šæ± é…ç½®
- [ ] è¨­ç½®é€£ç·šè¶…æ™‚
- [ ] é¿å…é•·äº‹å‹™
- [ ] ä½¿ç”¨é€£ç·šæ± 
- [ ] ç›£æ§æ…¢æŸ¥è©¢

---

#### 5. æ”¯ä»˜æˆåŠŸç‡ä½ (LowPaymentSuccessRate)

**ç—‡ç‹€**ï¼šæ”¯ä»˜æˆåŠŸç‡ < 95%ï¼ŒæŒçºŒ 10 åˆ†é˜

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥ Stripe æœå‹™ç‹€æ…‹
curl https://status.stripe.com

# 2. æŸ¥çœ‹æ”¯ä»˜æœå‹™æ—¥èªŒ
docker logs payment-service --tail 200 | grep -i error

# 3. åˆ†æå¤±æ•—åŸå› 
# Grafana > æ¥­å‹™æŒ‡æ¨™ > æ”¯ä»˜äº¤æ˜“ç‹€æ…‹

# 4. æª¢æŸ¥æ”¯ä»˜æœå‹™å¥åº·
curl http://localhost:3007/health

# 5. é©—è­‰ Stripe API key
# æª¢æŸ¥ç’°å¢ƒè®Šæ•¸é…ç½®

# 6. å¦‚æœæ˜¯ Stripe å•é¡Œï¼Œé€šçŸ¥ç”¨æˆ¶ä¸¦æº–å‚™é™ç´šæ–¹æ¡ˆ
# å¦‚æœæ˜¯ç¨‹å¼ç¢¼å•é¡Œï¼Œç·Šæ€¥ä¿®å¾©

# 7. æŒçºŒç›£æ§ç›´åˆ°æ¢å¾©æ­£å¸¸
```

**å‡ç´šè·¯å¾‘**ï¼š
```plaintext
15 åˆ†é˜æœªæ¢å¾© â†’ é€šçŸ¥æŠ€è¡“è² è²¬äºº
30 åˆ†é˜æœªæ¢å¾© â†’ é€šçŸ¥ç”¢å“å’Œé‹ç‡Ÿåœ˜éšŠ
1 å°æ™‚æœªæ¢å¾©  â†’ è€ƒæ…®å…¬å‘Šç¶­è­·ä¸¦æº–å‚™è£œå„Ÿæ–¹æ¡ˆ
```

---

### ğŸ“ On-Call è·è²¬

#### å·¥ä½œæ™‚é–“ï¼ˆ9:00 - 18:00ï¼‰
- ç«‹å³éŸ¿æ‡‰æ‰€æœ‰ Critical å‘Šè­¦
- 1å°æ™‚å…§éŸ¿æ‡‰ Warning å‘Šè­¦
- è¨˜éŒ„æ‰€æœ‰äº‹ä»¶

#### éå·¥ä½œæ™‚é–“ï¼ˆ18:00 - 9:00ï¼‰
- éŸ¿æ‡‰ Critical å‘Šè­¦ï¼ˆåƒ…é™å½±éŸ¿æ ¸å¿ƒåŠŸèƒ½ï¼‰
- è©•ä¼°æ˜¯å¦éœ€è¦ç«‹å³è™•ç†
- å¦‚éç·Šæ€¥å¯å»¶è‡³å·¥ä½œæ™‚é–“è™•ç†

#### é€±æœ«å’Œå‡æ—¥
- éŸ¿æ‡‰å½±éŸ¿ç‡Ÿæ”¶çš„ Critical å‘Šè­¦
- å…¶ä»–å‘Šè­¦è¨˜éŒ„ä¸¦åœ¨å·¥ä½œæ—¥è™•ç†

---

## å¸¸è¦‹å•é¡Œæ’æŸ¥

### â“ Q1: Prometheus ç„¡æ³•æŠ“å–æœå‹™æŒ‡æ¨™

**ç—‡ç‹€**ï¼šPrometheus Targets é é¢é¡¯ç¤ºæœå‹™ç‚º DOWN

**æ’æŸ¥æ­¥é©Ÿ**ï¼š
```bash
# 1. ç¢ºèªæœå‹™æ­£åœ¨é‹è¡Œ
docker ps | grep <service-name>

# 2. ç¢ºèªæœå‹™æš´éœ² metrics ç«¯é»
curl http://localhost:<port>/metrics

# 3. æª¢æŸ¥ç¶²è·¯é€£ç·š
docker network inspect suggar-daddy-network
# ç¢ºèªæœå‹™åœ¨åŒä¸€ç¶²è·¯

# 4. æª¢æŸ¥ Prometheus é…ç½®
docker exec -it suggar-daddy-prometheus cat /etc/prometheus/prometheus.yml

# 5. é‡æ–°è¼‰å…¥ Prometheus é…ç½®
curl -X POST http://localhost:9090/-/reload
```

---

### â“ Q2: Grafana ç„¡æ³•é€£æ¥ Prometheus

**ç—‡ç‹€**ï¼šDashboard é¡¯ç¤º "No data"

**æ’æŸ¥æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥ Prometheus æ˜¯å¦é‹è¡Œ
curl http://localhost:9090/-/healthy

# 2. åœ¨ Grafana ä¸­æ¸¬è©¦æ•¸æ“šæº
# Grafana > Configuration > Data Sources > Prometheus > Test

# 3. æª¢æŸ¥ç¶²è·¯
docker network inspect suggar-daddy-monitoring

# 4. æŸ¥çœ‹ Grafana æ—¥èªŒ
docker logs suggar-daddy-grafana --tail 50

# 5. é‡å•Ÿ Grafana
docker restart suggar-daddy-grafana
```

---

### â“ Q3: å‘Šè­¦æœªç™¼é€

**ç—‡ç‹€**ï¼šå‘Šè­¦å·²è§¸ç™¼ä½†æœªæ”¶åˆ°é€šçŸ¥

**æ’æŸ¥æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥ Alertmanager ç‹€æ…‹
curl http://localhost:9093/-/healthy

# 2. æŸ¥çœ‹ Alertmanager é…ç½®
docker exec -it suggar-daddy-alertmanager cat /etc/alertmanager/alertmanager.yml

# 3. æª¢æŸ¥å‘Šè­¦æ˜¯å¦åˆ°é” Alertmanager
# è¨ªå• http://localhost:9093/#/alerts

# 4. é©—è­‰é€šçŸ¥æ¸ é“é…ç½®
# æª¢æŸ¥ Slack webhook URL æˆ– SMTP é…ç½®

# 5. æ¸¬è©¦ç™¼é€å‘Šè­¦
curl -X POST http://localhost:9093/api/v1/alerts -d '[...]'

# 6. æŸ¥çœ‹ Alertmanager æ—¥èªŒ
docker logs suggar-daddy-alertmanager --tail 100
```

---

### â“ Q4: Dashboard åŠ è¼‰ç·©æ…¢

**ç—‡ç‹€**ï¼šGrafana Dashboard åŠ è¼‰æ™‚é–“éé•·

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```bash
# 1. æ¸›å°‘æ™‚é–“ç¯„åœï¼ˆæ”¹ç‚º 1h æˆ– 6hï¼‰

# 2. å„ªåŒ–æŸ¥è©¢ï¼ˆæ¸›å°‘é«˜åŸºæ•¸æ¨™ç±¤ï¼‰

# 3. èª¿æ•´åˆ·æ–°é–“éš”ï¼ˆå¾ 5s æ”¹ç‚º 30sï¼‰

# 4. å¢åŠ  Prometheus è¨˜æ†¶é«”
# ç·¨è¼¯ docker-compose.monitoring.yml
# å¢åŠ  prometheus memory limit

# 5. æª¢æŸ¥ Prometheus æ•ˆèƒ½
http://localhost:9090/metrics
# æŸ¥çœ‹ prometheus_engine_query_duration_seconds
```

---

### â“ Q5: ç£ç¢Ÿç©ºé–“ä¸è¶³

**ç—‡ç‹€**ï¼šç›£æ§ç³»çµ±ç£ç¢Ÿä½¿ç”¨ç‡å‘Šè­¦

**è™•ç†æ­¥é©Ÿ**ï¼š
```bash
# 1. æª¢æŸ¥ Prometheus æ•¸æ“šå¤§å°
docker exec -it suggar-daddy-prometheus du -sh /prometheus

# 2. æ¸…ç†èˆŠæ•¸æ“šï¼ˆè¬¹æ…ï¼‰
# Prometheus è‡ªå‹•æŒ‰ä¿ç•™æœŸæ¸…ç†ï¼ˆ30å¤©ï¼‰

# 3. ç¸®çŸ­ä¿ç•™æœŸ
# ç·¨è¼¯ docker-compose.monitoring.yml
# æ”¹ --storage.tsdb.retention.time=15d

# 4. å¢åŠ ç£ç¢Ÿç©ºé–“

# 5. è¨­ç½®é ç«¯å­˜å„²ï¼ˆé•·æœŸæ–¹æ¡ˆï¼‰
```

---

## é…ç½®èªªæ˜

### ğŸ”§ ç’°å¢ƒè®Šæ•¸

åœ¨ `.env` æ–‡ä»¶ä¸­é…ç½®ï¼š

```bash
# Grafana ç®¡ç†å“¡
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=your-secure-password

# PostgreSQLï¼ˆç”¨æ–¼ exporterï¼‰
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your-db-password
POSTGRES_DB=suggar_daddy

# Redisï¼ˆç”¨æ–¼ exporterï¼‰
REDIS_PASSWORD=your-redis-password

# å‘Šè­¦é€šçŸ¥ - Slack
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# å‘Šè­¦é€šçŸ¥ - Email
SMTP_HOST=smtp.gmail.com:587
SMTP_FROM=alerts@suggar-daddy.com
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password
ALERT_EMAIL_TO=devops@suggar-daddy.com
PAYMENT_ALERT_EMAIL=payment-team@suggar-daddy.com
BUSINESS_ALERT_EMAIL=business@suggar-daddy.com
```

### ğŸ“ è‡ªå®šç¾©å‘Šè­¦è¦å‰‡

ç·¨è¼¯ `infrastructure/monitoring/prometheus/alerts.yml`ï¼š

```yaml
groups:
  - name: custom_alerts
    interval: 1m
    rules:
      - alert: CustomAlert
        expr: your_metric > threshold
        for: 5m
        labels:
          severity: warning
          category: custom
        annotations:
          summary: "Your alert summary"
          description: "Detailed description"
```

é‡æ–°è¼‰å…¥é…ç½®ï¼š
```bash
curl -X POST http://localhost:9090/-/reload
```

### ğŸ“Š å‰µå»ºè‡ªå®šç¾© Dashboard

1. ç™»å…¥ Grafana
2. é»æ“Š "+" > "Dashboard"
3. æ·»åŠ  Panel
4. é¸æ“‡ Prometheus æ•¸æ“šæº
5. è¼¸å…¥ PromQL æŸ¥è©¢
6. ä¿å­˜ Dashboard

**åŒ¯å‡º Dashboard**ï¼š
```bash
# Dashboard Settings > JSON Model > Copy
# å„²å­˜ç‚º .json æ–‡ä»¶
```

---

## æœ€ä½³å¯¦è¸

### âœ… ç›£æ§è¨­è¨ˆåŸå‰‡

1. **å››å€‹é»ƒé‡‘ä¿¡è™Ÿ**ï¼š
   - **Latencyï¼ˆå»¶é²ï¼‰**ï¼šè«‹æ±‚å›æ‡‰æ™‚é–“
   - **Trafficï¼ˆæµé‡ï¼‰**ï¼šè«‹æ±‚é€Ÿç‡
   - **Errorsï¼ˆéŒ¯èª¤ï¼‰**ï¼šéŒ¯èª¤ç‡
   - **Saturationï¼ˆé£½å’Œåº¦ï¼‰**ï¼šè³‡æºä½¿ç”¨ç‡

2. **USE æ–¹æ³•**ï¼ˆè³‡æºç›£æ§ï¼‰ï¼š
   - **Utilizationï¼ˆä½¿ç”¨ç‡ï¼‰**ï¼šè³‡æºä½¿ç”¨ç™¾åˆ†æ¯”
   - **Saturationï¼ˆé£½å’Œåº¦ï¼‰**ï¼šç­‰å¾…éšŠåˆ—é•·åº¦
   - **Errorsï¼ˆéŒ¯èª¤ï¼‰**ï¼šéŒ¯èª¤æ•¸é‡

3. **RED æ–¹æ³•**ï¼ˆæœå‹™ç›£æ§ï¼‰ï¼š
   - **Rateï¼ˆé€Ÿç‡ï¼‰**ï¼šæ¯ç§’è«‹æ±‚æ•¸
   - **Errorsï¼ˆéŒ¯èª¤ï¼‰**ï¼šéŒ¯èª¤è«‹æ±‚æ•¸
   - **Durationï¼ˆæ™‚é•·ï¼‰**ï¼šè«‹æ±‚æ™‚é•·

### ğŸ“ æŒ‡æ¨™å‘½åè¦ç¯„

```plaintext
# æ ¼å¼ï¼š<service>_<metric>_<unit>

# è¨ˆæ•¸å™¨ï¼ˆCounterï¼‰- ç´¯è¨ˆå€¼
http_requests_total
user_registrations_total
payment_transactions_total

# å„€è¡¨ï¼ˆGaugeï¼‰- ç•¶å‰å€¼
user_active_total
memory_usage_bytes
cpu_usage_percent

# ç›´æ–¹åœ–ï¼ˆHistogramï¼‰- åˆ†ä½ˆ
http_request_duration_seconds
db_query_duration_seconds

# æ‘˜è¦ï¼ˆSummaryï¼‰- çµ±è¨ˆ
api_response_time_summary
```

### ğŸ¯ å‘Šè­¦è¨­è¨ˆåŸå‰‡

1. **å¯æ“ä½œæ€§**ï¼šæ¯å€‹å‘Šè­¦éƒ½æ‡‰è©²æœ‰æ˜ç¢ºçš„è™•ç†æ­¥é©Ÿ
2. **å„ªå…ˆç´š**ï¼šCritical > Warning > Info
3. **é¿å…å‘Šè­¦ç–²å‹**ï¼šä¸è¦è¨­ç½®éå¤šä½å„ªå…ˆç´šå‘Šè­¦
4. **æ¼¸é€²å¼å‘Šè­¦**ï¼šWarning â†’ Critical â†’ Page
5. **ä¸Šä¸‹æ–‡ä¿¡æ¯**ï¼šæä¾›è¶³å¤ çš„è¨ºæ–·ä¿¡æ¯

### ğŸ”„ å®šæœŸç¶­è­·

#### æ¯æ—¥
- [ ] æª¢æŸ¥ Critical å‘Šè­¦
- [ ] æŸ¥çœ‹ç³»çµ±è³‡æºè¶¨å‹¢

#### æ¯é€±
- [ ] å¯©æŸ¥å‘Šè­¦çµ±è¨ˆ
- [ ] å„ªåŒ–èª¤å ±å‘Šè­¦
- [ ] æª¢æŸ¥ç£ç¢Ÿç©ºé–“

#### æ¯æœˆ
- [ ] å¯©æŸ¥ Dashboard æœ‰æ•ˆæ€§
- [ ] æ›´æ–°å‘Šè­¦é–¾å€¼
- [ ] æ¸…ç†ç„¡ç”¨æŒ‡æ¨™
- [ ] æª¢æŸ¥æ•¸æ“šä¿ç•™ç­–ç•¥

#### æ¯å­£åº¦
- [ ] å®¹é‡è¦åŠƒ
- [ ] ç›£æ§ç³»çµ±æ•ˆèƒ½è©•ä¼°
- [ ] åœ˜éšŠåŸ¹è¨“å’Œæ¼”ç·´

---

## ğŸ†˜ æ”¯æŒå’Œè¯çµ¡

### æ–‡æª”æ›´æ–°
- **ç‰ˆæœ¬**: 1.0.0
- **æœ€å¾Œæ›´æ–°**: 2024-02-14
- **ç¶­è­·åœ˜éšŠ**: DevOps Team

### ç›¸é—œé€£çµ
- [Prometheus å®˜æ–¹æ–‡æª”](https://prometheus.io/docs/)
- [Grafana å®˜æ–¹æ–‡æª”](https://grafana.com/docs/)
- [Alertmanager æ–‡æª”](https://prometheus.io/docs/alerting/latest/alertmanager/)

### åœ˜éšŠè¯çµ¡
- **Slack**: #devops-monitoring
- **Email**: devops@suggar-daddy.com
- **On-Call**: æŸ¥çœ‹å€¼ç­è¡¨

---

## ğŸ“š é™„éŒ„

### A. PromQL å¸¸ç”¨æŸ¥è©¢

```promql
# æ¯ç§’è«‹æ±‚æ•¸
rate(http_requests_total[5m])

# éŒ¯èª¤ç‡
sum(rate(http_requests_total{status=~"5.."}[5m])) / sum(rate(http_requests_total[5m]))

# P95 å»¶é²
histogram_quantile(0.95, rate(http_request_duration_seconds_bucket[5m]))

# CPU ä½¿ç”¨ç‡
rate(container_cpu_usage_seconds_total[5m]) / (container_spec_cpu_quota / 100000) * 100

# è¨˜æ†¶é«”ä½¿ç”¨ç‡
container_memory_working_set_bytes / container_spec_memory_limit_bytes * 100
```

### B. å‘Šè­¦æ¸¬è©¦

```bash
# æ¨¡æ“¬è§¸ç™¼å‘Šè­¦ï¼ˆåƒ…ä¾›æ¸¬è©¦ï¼‰
# 1. åœæ­¢æœå‹™
docker stop <service-name>

# 2. ç­‰å¾… 1-2 åˆ†é˜
# 3. æª¢æŸ¥ Alertmanager
http://localhost:9093/#/alerts

# 4. æª¢æŸ¥é€šçŸ¥æ˜¯å¦ç™¼é€

# 5. æ¢å¾©æœå‹™
docker start <service-name>
```

### C. å‚™ä»½èˆ‡æ¢å¾©

```bash
# å‚™ä»½ Prometheus æ•¸æ“š
docker run --rm -v suggar-daddy-prometheus-data:/data -v $(pwd):/backup \
  alpine tar czf /backup/prometheus-backup.tar.gz /data

# å‚™ä»½ Grafana æ•¸æ“š
docker run --rm -v suggar-daddy-grafana-data:/data -v $(pwd):/backup \
  alpine tar czf /backup/grafana-backup.tar.gz /data

# æ¢å¾©æ•¸æ“š
docker run --rm -v suggar-daddy-prometheus-data:/data -v $(pwd):/backup \
  alpine tar xzf /backup/prometheus-backup.tar.gz -C /
```

---

**ğŸ‰ ç›£æ§ç³»çµ±æ–‡æª”å®Œæˆï¼é–‹å§‹ç›£æ§ä½ çš„æ‡‰ç”¨å§ï¼**
