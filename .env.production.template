# ==========================================
# ðŸš€ PRODUCTION ENVIRONMENT CONFIGURATION
# ==========================================
# File: .env.production
# Purpose: Production environment variables
# Security: Encrypt before deployment
# Last Updated: 2026-02-19

# ==========================================
# Database Configuration (PostgreSQL)
# ==========================================
DB_HOST=postgres.prod.internal
DB_PORT=5432
DB_USER=prod_user
DB_PASSWORD=__CHANGE_ME_STRONG_PASSWORD__
DB_NAME=sugar_daddy_prod
DB_SSL_MODE=require
DB_POOL_MIN=5
DB_POOL_MAX=20
DB_STATEMENT_CACHE_SIZE=100
DB_CONNECT_TIMEOUT=30

# Database Backup Configuration
DB_BACKUP_ENABLED=true
DB_BACKUP_SCHEDULE=0 2 * * *
DB_BACKUP_RETENTION_DAYS=30
DB_BACKUP_LOCATION=s3://sugar-daddy-prod-backups/postgres/
DB_BACKUP_ENCRYPTION=aes256

# Database Replication
DB_REPLICATION_ENABLED=true
DB_REPLICA_HOST=postgres-replica.prod.internal
DB_REPLICA_USER=replicator
DB_REPLICA_PASSWORD=__CHANGE_ME_STRONG_PASSWORD__

# ==========================================
# Redis Configuration (Cache & Session)
# ==========================================
REDIS_HOST=redis.prod.internal
REDIS_PORT=6379
REDIS_PASSWORD=__CHANGE_ME_STRONG_PASSWORD__
REDIS_DB=0
REDIS_TLS_ENABLED=true
REDIS_CA_CERT_PATH=/etc/redis/ca.crt
REDIS_CLIENT_CERT_PATH=/etc/redis/client.crt
REDIS_CLIENT_KEY_PATH=/etc/redis/client.key

# Redis Cluster
REDIS_CLUSTER_ENABLED=true
REDIS_CLUSTER_NODES=redis-1.prod.internal:6379,redis-2.prod.internal:6379,redis-3.prod.internal:6379
REDIS_CLUSTER_REPLICA_ENABLED=true

# Cache Configuration
CACHE_TTL_DEFAULT=3600
CACHE_TTL_SESSION=86400
CACHE_TTL_RECOMMENDATION=1800
CACHE_TTL_USER_PROFILE=7200
CACHE_EVICTION_POLICY=allkeys-lru

# ==========================================
# AWS Configuration
# ==========================================
AWS_REGION=us-east-1
AWS_ACCOUNT_ID=123456789012
AWS_ACCESS_KEY_ID=__CHANGE_ME_IAM_KEY__
AWS_SECRET_ACCESS_KEY=__CHANGE_ME_IAM_SECRET__

# S3 Configuration (Content & Media)
AWS_S3_BUCKET=sugar-daddy-prod-content
AWS_S3_REGION=us-east-1
AWS_S3_STORAGE_CLASS=STANDARD_IA
AWS_S3_VERSIONING_ENABLED=true
AWS_S3_SERVER_SIDE_ENCRYPTION=AES256
AWS_S3_MULTIPART_THRESHOLD=100MB
AWS_S3_MULTIPART_CHUNKSIZE=50MB

# S3 Backup Bucket
AWS_S3_BACKUP_BUCKET=sugar-daddy-prod-backups
AWS_S3_BACKUP_PREFIX=daily/
AWS_S3_BACKUP_LIFECYCLE_DAYS=90

# CloudFront CDN
AWS_CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
AWS_CLOUDFRONT_DOMAIN=d123456.cloudfront.net
AWS_CLOUDFRONT_PRICE_CLASS=PriceClass_100
AWS_CLOUDFRONT_MIN_TTL=0
AWS_CLOUDFRONT_DEFAULT_TTL=86400
AWS_CLOUDFRONT_MAX_TTL=31536000

# CloudWatch Monitoring
AWS_CLOUDWATCH_LOG_GROUP=/aws/sugar-daddy/prod
AWS_CLOUDWATCH_LOG_RETENTION_DAYS=30
AWS_CLOUDWATCH_LOG_STREAM_PREFIX=prod-

# ==========================================
# Application Configuration
# ==========================================
NODE_ENV=production
APP_NAME=sugar-daddy
APP_VERSION=1.0.0
APP_PORT=3000
APP_WORKERS=auto

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_DESTINATION=cloudwatch
LOG_RETENTION_DAYS=30

# Debug Mode (NEVER true in production)
DEBUG=false
VERBOSE=false

# ==========================================
# Security Configuration
# ==========================================
# JWT (JSON Web Token)
JWT_SECRET=__CHANGE_ME_RANDOM_32_CHARS__
JWT_REFRESH_SECRET=__CHANGE_ME_RANDOM_32_CHARS__
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d
JWT_ALGORITHM=HS256

# Encryption
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY=__CHANGE_ME_RANDOM_32_BYTES_BASE64__
ENCRYPTION_IV_LENGTH=16

# Hashing
HASHING_ALGORITHM=bcrypt
BCRYPT_ROUNDS=12

# SSL/TLS
SSL_ENABLED=true
SSL_CERT_PATH=/etc/ssl/certs/sugar-daddy.crt
SSL_KEY_PATH=/etc/ssl/private/sugar-daddy.key
SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# CORS Configuration
CORS_ENABLED=true
CORS_ORIGINS=https://sugar-daddy.com,https://app.sugar-daddy.com,https://api.sugar-daddy.com
CORS_CREDENTIALS=true

# CSRF Protection
CSRF_ENABLED=true
CSRF_TOKEN_NAME=_csrf

# ==========================================
# Service URLs (Internal)
# ==========================================
RECOMMENDATION_SERVICE_URL=https://recommendation.internal:3000
CONTENT_SERVICE_URL=https://content.internal:3001
AUTH_SERVICE_URL=https://auth.internal:3002
PAYMENT_SERVICE_URL=https://payment.internal:3003
API_GATEWAY_URL=https://api.sugar-daddy.com

# ==========================================
# Feature Flags
# ==========================================
ENABLE_SUBSCRIPTION_FEATURES=true
ENABLE_CDN=true
ENABLE_TRANSCODING=true
ENABLE_CACHE=true
ENABLE_COMPRESSION=true
ENABLE_RATE_LIMITING=true
ENABLE_MONITORING=true

# Transcoding Qualities
TRANSCODING_QUALITIES=360p,720p,1080p,4k
TRANSCODING_TIMEOUT_SECONDS=600
TRANSCODING_MAX_CONCURRENT_JOBS=10

# ==========================================
# Payment Configuration (Stripe)
# ==========================================
STRIPE_SECRET_KEY=sk_live___CHANGE_ME_KEY__
STRIPE_PUBLISHABLE_KEY=pk_live___CHANGE_ME_KEY__
STRIPE_WEBHOOK_SECRET=whsec___CHANGE_ME_SECRET__
STRIPE_API_VERSION=2024-01-01
STRIPE_WEBHOOK_ENDPOINT=/api/webhooks/stripe

# ==========================================
# Email Configuration (SendGrid)
# ==========================================
SENDGRID_API_KEY=SG.____CHANGE_ME_KEY__
SENDGRID_FROM_EMAIL=noreply@sugar-daddy.com
SENDGRID_FROM_NAME=Sugar Daddy
SENDGRID_REPLY_TO=support@sugar-daddy.com

# ==========================================
# SMS Configuration (Twilio)
# ==========================================
TWILIO_ACCOUNT_SID=AC____CHANGE_ME_SID__
TWILIO_AUTH_TOKEN=____CHANGE_ME_TOKEN__
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_WEBHOOK_URL=https://api.sugar-daddy.com/webhooks/twilio

# ==========================================
# Monitoring & Observability
# ==========================================

# Datadog APM
DATADOG_ENABLED=true
DATADOG_API_KEY=____CHANGE_ME_KEY__
DATADOG_APP_KEY=____CHANGE_ME_KEY__
DATADOG_SITE=datadoghq.com
DATADOG_TRACE_ENABLED=true
DATADOG_METRICS_ENABLED=true
DATADOG_LOG_ENABLED=true
DATADOG_TRACE_SAMPLE_RATE=0.1
DATADOG_APM_PORT=8126

# Sentry Error Tracking
SENTRY_ENABLED=true
SENTRY_DSN=https://____CHANGE_ME_KEY__@__CHANGE_ME_ORG__.ingest.sentry.io/__CHANGE_ME_PROJECT__
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Prometheus Metrics
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_METRICS_PATH=/metrics

# ==========================================
# Slack Notifications
# ==========================================
SLACK_ENABLED=true
SLACK_BOT_TOKEN=xoxb-____CHANGE_ME_TOKEN__
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/____CHANGE_ME_WEBHOOK__
SLACK_CHANNEL_ALERTS=#alerts
SLACK_CHANNEL_DEPLOYMENTS=#deployments

# ==========================================
# Rate Limiting & Throttling
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# Per-service limits
RATE_LIMIT_RECOMMENDATION_REQUESTS=1000
RATE_LIMIT_CONTENT_REQUESTS=500
RATE_LIMIT_AUTH_REQUESTS=200
RATE_LIMIT_PAYMENT_REQUESTS=50

# ==========================================
# Deployment Configuration
# ==========================================
DEPLOYMENT_REGION=us-east-1
DEPLOYMENT_ENVIRONMENT=production
DEPLOYMENT_CANARY_ENABLED=true
DEPLOYMENT_CANARY_PERCENTAGE=5
DEPLOYMENT_BLUE_GREEN_ENABLED=false

# Health Check Configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=10000
HEALTH_CHECK_ROUTE=/health

# ==========================================
# Performance Tuning
# ==========================================
# Node.js
NODE_OPTIONS=--max-old-space-size=4096 --gc-interval=100000

# HTTP
HTTP_KEEP_ALIVE=true
HTTP_KEEP_ALIVE_TIMEOUT=120000
HTTP_HEADERS_TIMEOUT=120000

# Database Connection Pool
DB_MIN_POOL_SIZE=5
DB_MAX_POOL_SIZE=20
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=30000

# ==========================================
# Security Headers
# ==========================================
SECURITY_HEADERS_ENABLED=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1; mode=block
STRICT_TRANSPORT_SECURITY=max-age=31536000; includeSubDomains
CONTENT_SECURITY_POLICY=default-src 'self'

# ==========================================
# Backup & Recovery
# ==========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE_DB=0 2 * * *
BACKUP_SCHEDULE_S3=0 3 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_ENCRYPTION_ENABLED=true
BACKUP_COMPRESSION_ENABLED=true

# ==========================================
# Compliance & Auditing
# ==========================================
AUDIT_LOGGING_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
GDPR_ENABLED=true
COMPLIANCE_CHECKSUM_ENABLED=true

# ==========================================
# IMPORTANT SECURITY NOTES
# ==========================================
# 1. NEVER commit this file with real secrets to version control
# 2. USE AWS Secrets Manager or HashiCorp Vault for production secrets
# 3. ROTATE all secrets every quarter
# 4. ENCRYPT this file before storage
# 5. RESTRICT file permissions to 0600
# 6. USE separate credentials per environment
# 7. MONITOR access to this file
# 8. CHANGE all __CHANGE_ME__ values before deployment
