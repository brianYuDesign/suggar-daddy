{
  "version": "2.0.0",
  "project": "sugar-daddy",
  "description": "CC Agent Triggers - Simplified & Rationalized",
  "lastUpdated": "2026-02-19T09:04:00Z",
  
  "philosophy": "Do the right thing automatically. Brian doesn't need to know what files changed.",
  
  "triggers": [
    {
      "id": "code-push",
      "name": "Code Push",
      "description": "Intelligently respond to any code push based on what changed",
      "enabled": true,
      "condition": "git push detected",
      "detector": "detect-change-type",
      "actions": {
        "backend": ["test", "lint", "coverage"],
        "frontend": ["build", "e2e-smoke", "bundle-check"],
        "both": ["test", "build"],
        "docs": ["validate-markdown", "check-links"],
        "schema": ["validate", "check-breaking-changes"]
      },
      "routing": {
        "backend": "g-backend-devops",
        "frontend": "g-frontend",
        "docs": "g-sa-specs",
        "schema": "g-sa-specs"
      },
      "priority": "high",
      "timeout_seconds": 600,
      "report": "compact"
    },
    
    {
      "id": "failure-detection",
      "name": "Failure Detection & Analysis",
      "description": "Detect failures and automatically analyze root cause",
      "enabled": true,
      "conditions": [
        "Test fails",
        "Build fails",
        "Docker health check fails",
        "Error rate spike"
      ],
      "detector": "detect-failure-type",
      "actions": {
        "test_failure": ["analyze", "suggest-fix"],
        "build_failure": ["check-logs", "suggest-fix"],
        "docker_failure": ["diagnose", "attempt-recovery"],
        "error_spike": ["analyze-errors", "suggest-rollback"]
      },
      "routing": {
        "default": "g-backend-devops",
        "urgent": "g-backend-devops"
      },
      "priority": "critical",
      "timeout_seconds": 180,
      "report": "detailed"
    },
    
    {
      "id": "health-check",
      "name": "System Health Check",
      "description": "Periodic health check of all systems",
      "enabled": true,
      "schedule": {
        "type": "interval",
        "interval_ms": 21600000,
        "quiet_hours": ["22:00-08:00"]
      },
      "checks": [
        "docker-health",
        "pm2-services",
        "databases",
        "api-gateway",
        "response-times"
      ],
      "actions": {
        "all_healthy": ["log"],
        "some_degraded": ["alert", "suggest-optimization"],
        "critical_down": ["emergency-notify"]
      },
      "routing": {
        "default": "g-backend-devops",
        "critical": "g-backend-devops"
      },
      "priority": "medium",
      "timeout_seconds": 300,
      "report": "summary"
    }
  ],
  
  "notifications": {
    "philosophy": "Only notify Brian when action is needed",
    "quiet_hours": {
      "enabled": true,
      "start": "22:00",
      "end": "08:00",
      "critical_only": true
    },
    "batching": {
      "enabled": true,
      "timeout_seconds": 300,
      "exclude_from_batching": ["critical_failure", "system_down", "p0_issue"]
    },
    "format": "compact",
    "include_files_changed": false,
    "include_technical_details": false
  },
  
  "behavior": {
    "auto_fix_enabled": true,
    "auto_recovery_enabled": true,
    "max_parallel_tasks": 2,
    "confidence_threshold": 0.75,
    "safety": {
      "no_destructive_without_approval": true,
      "no_production_deploy_without_approval": true,
      "always_log_decisions": true
    }
  },
  
  "learning": {
    "enabled": true,
    "store_decision_logs": true,
    "path": ".cc_decisions"
  }
}
