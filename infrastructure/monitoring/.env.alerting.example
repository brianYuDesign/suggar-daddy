# ============================================
# 告警通知配置範例
# Suggar Daddy Monitoring - Alert Notification
# ============================================
# 
# 使用方式：
# 1. 複製此文件為 .env.alerting
# 2. 填入實際的配置值
# 3. 在 docker-compose.monitoring.yml 中引用
#
# ⚠️ 重要：不要將包含真實密鑰的文件提交到 Git

# ============================================
# Slack 通知配置
# ============================================

# Slack Webhook URL（必需）
# 獲取方式：https://api.slack.com/messaging/webhooks
# 範例：https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX
SLACK_WEBHOOK_URL=

# Slack 頻道配置（可選，webhook URL 中已包含默認頻道）
SLACK_CHANNEL_CRITICAL=#critical-alerts
SLACK_CHANNEL_WARNING=#warnings
SLACK_CHANNEL_INFO=#info-alerts
SLACK_CHANNEL_BUSINESS=#business-metrics

# ============================================
# Email 通知配置
# ============================================

# SMTP 伺服器配置
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# 發件人地址
ALERT_EMAIL_FROM=alerts@suggar-daddy.com

# 收件人配置
CRITICAL_ALERT_EMAIL=devops@suggar-daddy.com,oncall@suggar-daddy.com
WARNING_ALERT_EMAIL=devops@suggar-daddy.com
ON_CALL_EMAIL=oncall@suggar-daddy.com
PAYMENT_TEAM_EMAIL=payment-team@suggar-daddy.com
PAYMENT_OPS_EMAIL=payment-ops@suggar-daddy.com
BUSINESS_TEAM_EMAIL=business@suggar-daddy.com
DBA_EMAIL=dba@suggar-daddy.com

# ============================================
# PagerDuty 配置（可選）
# ============================================

# PagerDuty Integration Key
# 獲取方式：PagerDuty > Services > Add Integration
PAGERDUTY_INTEGRATION_KEY=
PAGERDUTY_SERVICE_KEY=

# ============================================
# Grafana SMTP 配置（用於 Grafana 告警）
# ============================================

GRAFANA_SMTP_ENABLED=true
GRAFANA_SMTP_HOST=smtp.gmail.com:587
GRAFANA_SMTP_USER=your-email@gmail.com
GRAFANA_SMTP_PASSWORD=your-app-password
GRAFANA_SMTP_FROM=grafana@suggar-daddy.com

# ============================================
# AWS SNS 配置（可選，用於簡訊通知）
# ============================================

AWS_SNS_TOPIC_ARN=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1

# ============================================
# Discord Webhook 配置（可選）
# ============================================

DISCORD_WEBHOOK_URL=

# ============================================
# Microsoft Teams Webhook 配置（可選）
# ============================================

TEAMS_WEBHOOK_URL=

# ============================================
# 告警靜默時間配置（可選）
# ============================================

# 維護窗口（不發送告警）
# 格式：weekdays:start_time-end_time
# 範例：saturday,sunday:02:00-04:00
MAINTENANCE_WINDOW=

# ============================================
# 告警頻率限制（可選）
# ============================================

# 相同告警的最小間隔（秒）
ALERT_REPEAT_INTERVAL=3600

# 告警分組等待時間（秒）
ALERT_GROUP_WAIT=10

# 告警分組間隔（秒）
ALERT_GROUP_INTERVAL=300

# ============================================
# 備份通知配置
# ============================================

# 備份完成後發送通知
BACKUP_NOTIFICATION_ENABLED=true
BACKUP_NOTIFICATION_EMAIL=devops@suggar-daddy.com

# ============================================
# 測試模式（開發環境）
# ============================================

# 在測試模式下，所有告警都發送到測試頻道
ALERT_TEST_MODE=false
ALERT_TEST_CHANNEL=#alert-testing
ALERT_TEST_EMAIL=test@suggar-daddy.com

# ============================================
# 告警抑制配置
# ============================================

# 在某些情況下抑制告警（如已知的維護期間）
ALERT_INHIBIT_ENABLED=true

# ============================================
# 日誌配置
# ============================================

# Alertmanager 日誌級別
ALERTMANAGER_LOG_LEVEL=info

# Prometheus 日誌級別
PROMETHEUS_LOG_LEVEL=info
